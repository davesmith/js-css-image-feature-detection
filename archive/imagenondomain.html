<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8" />

<title>Image dynamically added to the head element</title>

<script>

var scripts = document.getElementsByTagName('script')
    ,script = scripts[scripts.length - 1]
    ;


    img = new Image();
    var bob = document.createElement('span');
    img.appendChild(bob);
    script.parentNode.insertBefore(img, script);


var iShouldBeInThe = 'headElement'
    ,butIm = '?'
    ;
    
</script>

</head>
<body>
<h1>Image dynamically added to the head element</h1>


<pre id="test3">3</pre>
<pre id="test2">2</pre>
<pre id="test">1</pre>
<script>


    var test = document.getElementById('test');
    var test2 = document.getElementById('test2');
    var test3 = document.getElementById('test3');
    
    img.onload = function() {
    
        test2.innerHTML = 'onload called';
        
    };
//    img.onabort = function() {
//        
//        test3.innerHTML = 'onabort';
//    }
//    img.onloadeddata = function() {
//        
//        test3.innerHTML = 'onloadeddata';
//    }
//    img.onloadstart = function() {
//        
//        test3.innerHTML = 'onloadstart';
//    }
    img.onprogress = function() {
        
        test3.innerHTML = 'onprogress';
    }
    
    img.onerror = function(e) {
    
        var str = ''
            ,thing
        ;
        
        thing = e.target.children;
        thing = this;
        
        for (var i in thing) {
            if (thing[i] != '') {
                str += i+'='+thing[i]+'<br />';
            }
        }
        
        //test.innerHTML = 'onerror called'+img.complete;
        test.innerHTML = 'onerror called<br />'+str;
    };
    
    img.src="//ajax.googleapis.com/ajax/libs/webfont/1.4.10/webfont.js";

</script>

<h2>Outcome</h2>
<p>Yes: When img.onerror is called only when images are on</p>
<ul>
    <li>Chrome
        <ul>
            <li>30
                <ul>
                    <li>Yes</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Firefox
        <ul>
            <li>24
                <ul>
                    <li>No</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Internet Explorer
        <ul>
            <li>6, 10 (and 7,8,9 in dev toolbar)
                <ul>
                    <li>Yes</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Opera
        <ul>
            <li>17, 12.14, 11.64, 10.63
                <ul>
                    <li>Yes</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Safari
        <ul>
            <li>6
                <ul>
                    <li>Yes</li>
                </ul>
            </li>
        </ul>
    </li>
    
</ul>
</body>
</html>
